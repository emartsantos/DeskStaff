import{v as dt,a as l,p as e,w as Xt,A as ea}from"./chunk-EPOLDU6W-BHelFxtI.js";import{s as w,b as ot}from"./supabase-ABfmbsGw.js";import{u as ut,c as W,P as we,t as h,I as $}from"./index-C0vNNbe7.js";import{c as gt,u as Ye,C as Y,b as Ve,d as ze,B as v,a as se,e as ta}from"./card-DCCwVGqU.js";import{d as aa,e as mt,R as ra,I as sa,h as oa,f as na,g as ia,F as la,X as ht,S as We,B as ca,A as ye,a as Be,b as be,i as da,u as ua,c as ga,U as Te,D as ma,j as ha,k as xa,l as Ie,m as pa,T as nt,C as fa,n as ya,V as Oe,H as Re,M as it,o as ba,L as va}from"./usePosts-v-_rWZCA.js";import{S as qe}from"./separator-Bmx-RGAP.js";import"./index-BRs_dBEV.js";import{u as fe,P as wa,D as ja}from"./index-DQ1tQClc.js";import{c as D,L as oe,a as R}from"./loader-circle-B5kmy_fB.js";import{B as de}from"./badge-CCoSctF9.js";import{A as Na,C as lt,L as P,E as Fe,a as Le}from"./AuthChecker-BBhK0CVT.js";import{M as ka}from"./mail-BwQk4DBE.js";import{L as Ca}from"./lock-RqldTzhB.js";import"./ThemeProvider-1bH72AO7.js";const _a=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Pa=D("award",_a);const Sa=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Da=D("bookmark",Sa);const Ea=[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ct=D("briefcase-business",Ea);const $a=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ma=D("briefcase",$a);const Ta=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Ia=D("calendar-days",Ta);const Oa=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ra=D("calendar",Oa);const Fa=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],La=D("clock",Fa);const Aa=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ua=D("ellipsis",Aa);const Va=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],za=D("file-text",Va);const Wa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ba=D("globe",Wa);const qa=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ha=D("map-pin",qa);const Ga=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],He=D("message-square",Ga);const Ya=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ka=D("phone",Ya);const Ja=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Za=D("settings",Ja);const Qa=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ge=D("user-plus",Qa);function Xa({children:t}){const a=dt(),[n,o]=l.useState(!0),[i,s]=l.useState(!1);l.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:{session:c},error:g}=await w.auth.getSession();if(g)throw console.error("Session error:",g),g;if(!c){a("/",{replace:!0});return}const{data:p,error:b}=await w.from("users").select("id").eq("id",c.user.id).single();if(b||!p){console.error("User not found in database:",b),await w.auth.signOut(),a("/",{replace:!0});return}s(!0)}catch(c){console.error("Authentication error:",c),a("/",{replace:!0})}finally{o(!1)}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"h-12 w-12 animate-spin mx-auto text-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Verifying authentication..."})]})}):i?e.jsx(Na,{requireAuth:!0,redirectTo:"/",children:t}):null}function er(t,a=[]){let n=[];function o(s,d){const c=l.createContext(d),g=n.length;n=[...n,d];const p=f=>{const{scope:k,children:I,...C}=f,L=k?.[t]?.[g]||c,E=l.useMemo(()=>C,Object.values(C));return e.jsx(L.Provider,{value:E,children:I})};p.displayName=s+"Provider";function b(f,k){const I=k?.[t]?.[g]||c,C=l.useContext(I);if(C)return C;if(d!==void 0)return d;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[p,b]}const i=()=>{const s=n.map(d=>l.createContext(d));return function(c){const g=c?.[t]||s;return l.useMemo(()=>({[`__scope${t}`]:{...c,[t]:g}}),[c,g])}};return i.scopeName=t,[o,tr(i,...a)]}function tr(...t){const a=t[0];if(t.length===1)return a;const n=()=>{const o=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const d=o.reduce((c,{useScope:g,scopeName:p})=>{const f=g(s)[`__scope${p}`];return{...c,...f}},{});return l.useMemo(()=>({[`__scope${a.scopeName}`]:d}),[d])}};return n.scopeName=a.scopeName,n}function ar(t){const a=rr(t),n=l.forwardRef((o,i)=>{const{children:s,...d}=o,c=l.Children.toArray(s),g=c.find(or);if(g){const p=g.props.children,b=c.map(f=>f===g?l.Children.count(p)>1?l.Children.only(null):l.isValidElement(p)?p.props.children:null:f);return e.jsx(a,{...d,ref:i,children:l.isValidElement(p)?l.cloneElement(p,void 0,b):null})}return e.jsx(a,{...d,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function rr(t){const a=l.forwardRef((n,o)=>{const{children:i,...s}=n;if(l.isValidElement(i)){const d=ir(i),c=nr(s,i.props);return i.type!==l.Fragment&&(c.ref=o?gt(o,d):d),l.cloneElement(i,c)}return l.Children.count(i)>1?l.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var sr=Symbol("radix.slottable");function or(t){return l.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===sr}function nr(t,a){const n={...a};for(const o in a){const i=t[o],s=a[o];/^on[A-Z]/.test(o)?i&&s?n[o]=(...c)=>{const g=s(...c);return i(...c),g}:i&&(n[o]=i):o==="style"?n[o]={...i,...s}:o==="className"&&(n[o]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function ir(t){let a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning;return n?t.ref:(a=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var lr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=lr.reduce((t,a)=>{const n=ar(`Primitive.${a}`),o=l.forwardRef((i,s)=>{const{asChild:d,...c}=i,g=d?n:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...c,ref:s})});return o.displayName=`Primitive.${a}`,{...t,[a]:o}},{}),Ne="Tabs",[cr]=er(Ne,[mt]),xt=mt(),[dr,Ke]=cr(Ne),pt=l.forwardRef((t,a)=>{const{__scopeTabs:n,value:o,onValueChange:i,defaultValue:s,orientation:d="horizontal",dir:c,activationMode:g="automatic",...p}=t,b=aa(c),[f,k]=ut({prop:o,onChange:i,defaultProp:s??"",caller:Ne});return e.jsx(dr,{scope:n,baseId:fe(),value:f,onValueChange:k,orientation:d,dir:b,activationMode:g,children:e.jsx(je.div,{dir:b,"data-orientation":d,...p,ref:a})})});pt.displayName=Ne;var ft="TabsList",yt=l.forwardRef((t,a)=>{const{__scopeTabs:n,loop:o=!0,...i}=t,s=Ke(ft,n),d=xt(n);return e.jsx(ra,{asChild:!0,...d,orientation:s.orientation,dir:s.dir,loop:o,children:e.jsx(je.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:a})})});yt.displayName=ft;var bt="TabsTrigger",vt=l.forwardRef((t,a)=>{const{__scopeTabs:n,value:o,disabled:i=!1,...s}=t,d=Ke(bt,n),c=xt(n),g=Nt(d.baseId,o),p=kt(d.baseId,o),b=o===d.value;return e.jsx(sa,{asChild:!0,...c,focusable:!i,active:b,children:e.jsx(je.button,{type:"button",role:"tab","aria-selected":b,"aria-controls":p,"data-state":b?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:g,...s,ref:a,onMouseDown:W(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?d.onValueChange(o):f.preventDefault()}),onKeyDown:W(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&d.onValueChange(o)}),onFocus:W(t.onFocus,()=>{const f=d.activationMode!=="manual";!b&&!i&&f&&d.onValueChange(o)})})})});vt.displayName=bt;var wt="TabsContent",jt=l.forwardRef((t,a)=>{const{__scopeTabs:n,value:o,forceMount:i,children:s,...d}=t,c=Ke(wt,n),g=Nt(c.baseId,o),p=kt(c.baseId,o),b=o===c.value,f=l.useRef(b);return l.useEffect(()=>{const k=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(k)},[]),e.jsx(we,{present:i||b,children:({present:k})=>e.jsx(je.div,{"data-state":b?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":g,hidden:!k,id:p,tabIndex:0,...d,ref:a,style:{...t.style,animationDuration:f.current?"0s":void 0},children:k&&s})})});jt.displayName=wt;function Nt(t,a){return`${t}-trigger-${a}`}function kt(t,a){return`${t}-content-${a}`}var ur=pt,gr=yt,mr=vt,hr=jt;function xr({className:t,...a}){return e.jsx(ur,{"data-slot":"tabs",className:R("flex flex-col gap-2",t),...a})}function pr({className:t,...a}){return e.jsx(gr,{"data-slot":"tabs-list",className:R("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function Ae({className:t,...a}){return e.jsx(mr,{"data-slot":"tabs-trigger",className:R("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function Ue({className:t,...a}){return e.jsx(hr,{"data-slot":"tabs-content",className:R("flex-1 outline-none",t),...a})}function fr(t,a){const n=l.createContext(a),o=s=>{const{children:d,...c}=s,g=l.useMemo(()=>c,Object.values(c));return e.jsx(n.Provider,{value:g,children:d})};o.displayName=t+"Provider";function i(s){const d=l.useContext(n);if(d)return d;if(a!==void 0)return a;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[o,i]}function yr(t,a=[]){let n=[];function o(s,d){const c=l.createContext(d),g=n.length;n=[...n,d];const p=f=>{const{scope:k,children:I,...C}=f,L=k?.[t]?.[g]||c,E=l.useMemo(()=>C,Object.values(C));return e.jsx(L.Provider,{value:E,children:I})};p.displayName=s+"Provider";function b(f,k){const I=k?.[t]?.[g]||c,C=l.useContext(I);if(C)return C;if(d!==void 0)return d;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[p,b]}const i=()=>{const s=n.map(d=>l.createContext(d));return function(c){const g=c?.[t]||s;return l.useMemo(()=>({[`__scope${t}`]:{...c,[t]:g}}),[c,g])}};return i.scopeName=t,[o,br(i,...a)]}function br(...t){const a=t[0];if(t.length===1)return a;const n=()=>{const o=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const d=o.reduce((c,{useScope:g,scopeName:p})=>{const f=g(s)[`__scope${p}`];return{...c,...f}},{});return l.useMemo(()=>({[`__scope${a.scopeName}`]:d}),[d])}};return n.scopeName=a.scopeName,n}function Ct(t){const a=vr(t),n=l.forwardRef((o,i)=>{const{children:s,...d}=o,c=l.Children.toArray(s),g=c.find(jr);if(g){const p=g.props.children,b=c.map(f=>f===g?l.Children.count(p)>1?l.Children.only(null):l.isValidElement(p)?p.props.children:null:f);return e.jsx(a,{...d,ref:i,children:l.isValidElement(p)?l.cloneElement(p,void 0,b):null})}return e.jsx(a,{...d,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function vr(t){const a=l.forwardRef((n,o)=>{const{children:i,...s}=n;if(l.isValidElement(i)){const d=kr(i),c=Nr(s,i.props);return i.type!==l.Fragment&&(c.ref=o?gt(o,d):d),l.cloneElement(i,c)}return l.Children.count(i)>1?l.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var wr=Symbol("radix.slottable");function jr(t){return l.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===wr}function Nr(t,a){const n={...a};for(const o in a){const i=t[o],s=a[o];/^on[A-Z]/.test(o)?i&&s?n[o]=(...c)=>{const g=s(...c);return i(...c),g}:i&&(n[o]=i):o==="style"?n[o]={...i,...s}:o==="className"&&(n[o]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function kr(t){let a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning;return n?t.ref:(a=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=a&&"isReactWarning"in a&&a.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Cr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ne=Cr.reduce((t,a)=>{const n=Ct(`Primitive.${a}`),o=l.forwardRef((i,s)=>{const{asChild:d,...c}=i,g=d?n:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...c,ref:s})});return o.displayName=`Primitive.${a}`,{...t,[a]:o}},{}),ke="Dialog",[_t]=yr(ke),[_r,F]=_t(ke),Pt=t=>{const{__scopeDialog:a,children:n,open:o,defaultOpen:i,onOpenChange:s,modal:d=!0}=t,c=l.useRef(null),g=l.useRef(null),[p,b]=ut({prop:o,defaultProp:i??!1,onChange:s,caller:ke});return e.jsx(_r,{scope:a,triggerRef:c,contentRef:g,contentId:fe(),titleId:fe(),descriptionId:fe(),open:p,onOpenChange:b,onOpenToggle:l.useCallback(()=>b(f=>!f),[b]),modal:d,children:n})};Pt.displayName=ke;var St="DialogTrigger",Pr=l.forwardRef((t,a)=>{const{__scopeDialog:n,...o}=t,i=F(St,n),s=Ye(a,i.triggerRef);return e.jsx(ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Qe(i.open),...o,ref:s,onClick:W(t.onClick,i.onOpenToggle)})});Pr.displayName=St;var Je="DialogPortal",[Sr,Dt]=_t(Je,{forceMount:void 0}),Et=t=>{const{__scopeDialog:a,forceMount:n,children:o,container:i}=t,s=F(Je,a);return e.jsx(Sr,{scope:a,forceMount:n,children:l.Children.map(o,d=>e.jsx(we,{present:n||s.open,children:e.jsx(wa,{asChild:!0,container:i,children:d})}))})};Et.displayName=Je;var ve="DialogOverlay",$t=l.forwardRef((t,a)=>{const n=Dt(ve,t.__scopeDialog),{forceMount:o=n.forceMount,...i}=t,s=F(ve,t.__scopeDialog);return s.modal?e.jsx(we,{present:o||s.open,children:e.jsx(Er,{...i,ref:a})}):null});$t.displayName=ve;var Dr=Ct("DialogOverlay.RemoveScroll"),Er=l.forwardRef((t,a)=>{const{__scopeDialog:n,...o}=t,i=F(ve,n);return e.jsx(na,{as:Dr,allowPinchZoom:!0,shards:[i.contentRef],children:e.jsx(ne.div,{"data-state":Qe(i.open),...o,ref:a,style:{pointerEvents:"auto",...o.style}})})}),q="DialogContent",Mt=l.forwardRef((t,a)=>{const n=Dt(q,t.__scopeDialog),{forceMount:o=n.forceMount,...i}=t,s=F(q,t.__scopeDialog);return e.jsx(we,{present:o||s.open,children:s.modal?e.jsx($r,{...i,ref:a}):e.jsx(Mr,{...i,ref:a})})});Mt.displayName=q;var $r=l.forwardRef((t,a)=>{const n=F(q,t.__scopeDialog),o=l.useRef(null),i=Ye(a,n.contentRef,o);return l.useEffect(()=>{const s=o.current;if(s)return oa(s)},[]),e.jsx(Tt,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:W(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:W(t.onPointerDownOutside,s=>{const d=s.detail.originalEvent,c=d.button===0&&d.ctrlKey===!0;(d.button===2||c)&&s.preventDefault()}),onFocusOutside:W(t.onFocusOutside,s=>s.preventDefault())})}),Mr=l.forwardRef((t,a)=>{const n=F(q,t.__scopeDialog),o=l.useRef(!1),i=l.useRef(!1);return e.jsx(Tt,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(o.current||n.triggerRef.current?.focus(),s.preventDefault()),o.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(o.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const d=s.target;n.triggerRef.current?.contains(d)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Tt=l.forwardRef((t,a)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,...d}=t,c=F(q,n),g=l.useRef(null),p=Ye(a,g);return ia(),e.jsxs(e.Fragment,{children:[e.jsx(la,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:s,children:e.jsx(ja,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Qe(c.open),...d,ref:p,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Tr,{titleId:c.titleId}),e.jsx(Or,{contentRef:g,descriptionId:c.descriptionId})]})]})}),Ze="DialogTitle",It=l.forwardRef((t,a)=>{const{__scopeDialog:n,...o}=t,i=F(Ze,n);return e.jsx(ne.h2,{id:i.titleId,...o,ref:a})});It.displayName=Ze;var Ot="DialogDescription",Rt=l.forwardRef((t,a)=>{const{__scopeDialog:n,...o}=t,i=F(Ot,n);return e.jsx(ne.p,{id:i.descriptionId,...o,ref:a})});Rt.displayName=Ot;var Ft="DialogClose",Lt=l.forwardRef((t,a)=>{const{__scopeDialog:n,...o}=t,i=F(Ft,n);return e.jsx(ne.button,{type:"button",...o,ref:a,onClick:W(t.onClick,()=>i.onOpenChange(!1))})});Lt.displayName=Ft;function Qe(t){return t?"open":"closed"}var At="DialogTitleWarning",[ls,Ut]=fr(At,{contentName:q,titleName:Ze,docsSlug:"dialog"}),Tr=({titleId:t})=>{const a=Ut(At),n=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return l.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Ir="DialogDescriptionWarning",Or=({contentRef:t,descriptionId:a})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ut(Ir).contentName}}.`;return l.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");a&&i&&(document.getElementById(a)||console.warn(o))},[o,t,a]),null},Rr=Pt,Fr=Et,Lr=$t,Ar=Mt,Ur=It,Vr=Rt,zr=Lt;function ue({...t}){return e.jsx(Rr,{"data-slot":"dialog",...t})}function Wr({...t}){return e.jsx(Fr,{"data-slot":"dialog-portal",...t})}function Br({className:t,...a}){return e.jsx(Lr,{"data-slot":"dialog-overlay",className:R("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function ge({className:t,children:a,showCloseButton:n=!0,...o}){return e.jsxs(Wr,{"data-slot":"dialog-portal",children:[e.jsx(Br,{}),e.jsxs(Ar,{"data-slot":"dialog-content",className:R("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...o,children:[a,n&&e.jsxs(zr,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(ht,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function me({className:t,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:R("flex flex-col gap-2 text-center sm:text-left",t),...a})}function he({className:t,...a}){return e.jsx("div",{"data-slot":"dialog-footer",className:R("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function xe({className:t,...a}){return e.jsx(Ur,{"data-slot":"dialog-title",className:R("text-lg leading-none font-semibold",t),...a})}function pe({className:t,...a}){return e.jsx(Vr,{"data-slot":"dialog-description",className:R("text-muted-foreground text-sm",t),...a})}function ae({className:t,...a}){return e.jsx("div",{"data-slot":"skeleton",className:R("bg-accent animate-pulse rounded-md",t),...a})}function qr({user:t,connectionsCount:a=0,isOwnProfile:n=!1,onConnect:o,onMessage:i,onEdit:s,showActions:d=!0}){return e.jsxs(Y,{className:"border-gray-200/50 dark:border-gray-700/50 bg-white dark:bg-gray-900",children:[e.jsx(Ve,{className:"pb-3",children:e.jsxs(ze,{className:"flex items-center justify-between text-lg text-gray-900 dark:text-white",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Professional Information"]}),n&&s&&e.jsx(v,{variant:"ghost",size:"sm",onClick:s,className:"text-gray-600 dark:text-gray-400",children:e.jsx(We,{className:"h-4 w-4"})})]})}),e.jsxs(se,{className:"space-y-4",children:[t.bio?e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:t.bio}):e.jsx("p",{className:"text-gray-400 italic",children:"No summary added yet"}),e.jsx(qe,{className:"bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"space-y-4",children:[t.position&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(ct,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Position"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.position})]})]}),t.department&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:e.jsx(ca,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Department"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.department})]})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(Ha,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Location"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.location})]})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(ka,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Email"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 truncate",children:t.email})]})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(Ka,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Phone"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t.phone})]})]}),t.hire_date&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx(Ra,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Hire Date"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:new Date(t.hire_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})]}),d&&!n&&e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",onClick:o,children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Connect"]}),e.jsxs(v,{variant:"outline",className:"flex-1 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",onClick:i,children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Message"]})]})]})]})]})}class K{static instance;version=Date.now();subscribers=[];constructor(){}static getInstance(){return K.instance||(K.instance=new K),K.instance}getVersion(){return this.version}bust(){this.version=Date.now(),this.notifySubscribers()}subscribe(a){return this.subscribers.push(a),()=>{this.subscribers=this.subscribers.filter(n=>n!==a)}}notifySubscribers(){this.subscribers.forEach(a=>a())}bustUrl(a){if(!a)return a;try{const n=new URL(a);return n.searchParams.set("_cb",this.version.toString()),n.toString()}catch{return a}}bustSupabaseUrl(a){return!a||!a.includes("supabase.co")?a:this.bustUrl(a)}}const re=K.getInstance();function Hr(){const[t,a]=l.useState(re.getVersion());return l.useEffect(()=>re.subscribe(()=>{a(re.getVersion())}),[]),{version:t,bust:()=>re.bust(),getBustedUrl:i=>i&&re.bustSupabaseUrl(i)}}function Gr({userId:t,currentAvatarUrl:a,onUploadComplete:n,size:o="md",editable:i=!0,showRemoveButton:s=!0,compact:d=!1}){const[c,g]=l.useState(!1),[p,b]=l.useState(!1),[f,k]=l.useState(!1),[I,C]=l.useState(Date.now()),{getBustedUrl:L,version:E}=Hr(),J={xs:"h-8 w-8",sm:"h-12 w-12",md:"h-16 w-16",lg:"h-24 w-24",xl:"h-32 w-32"},A={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6",xl:"h-8 w-8"};l.useEffect(()=>{C(Date.now())},[E]);const Ce=async y=>{try{const j=await fetch(y,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store"});if(j.ok){const V=await j.blob(),z=URL.createObjectURL(V);return setTimeout(()=>{URL.revokeObjectURL(z)},3e3),z}}catch(j){console.warn("Could not force refresh image:",j)}return L(y)},H=async y=>{if(!t){h.error("User ID is required");return}if(!y.type.startsWith("image/")){h.error("Please upload an image file");return}if(y.size>5*1024*1024){h.error("Image size should be less than 5MB");return}g(!0),k(!1);try{const j=y.name.split(".").pop()?.toLowerCase(),V=Date.now(),z=Math.random().toString(36).substring(2,10),le=`${V}_${z}.${j}`,Z=`${t}/${le}`,{error:ce}=await w.storage.from("avatars").upload(Z,y,{cacheControl:"0",upsert:!1,contentType:y.type});if(ce)throw ce;const{data:{publicUrl:Pe}}=w.storage.from("avatars").getPublicUrl(Z),Q=`${Pe}?_=${V}&cb=${Date.now()}`,{error:X}=await w.from("users").update({avatar_url:Q,updated_at:new Date().toISOString()}).eq("id",t);if(X)throw await w.storage.from("avatars").remove([Z]),X;ot(),C(Date.now());let M=Q;try{M=await Ce(Q)}catch(T){console.warn("Using regular URL for image:",T)}n(M),k(!0),setTimeout(async()=>{try{const{data:T}=await w.storage.from("avatars").list(t);if(T){const G=T.filter(ee=>ee.name!==le).map(ee=>`${t}/${ee.name}`);G.length>0&&await w.storage.from("avatars").remove(G)}}catch(T){console.warn("Failed to cleanup old avatars:",T)}},2e3),setTimeout(()=>k(!1),2e3),d||h.success("Profile picture updated!")}catch(j){console.error("Error uploading avatar:",j),h.error(j.message||"Failed to upload profile picture")}finally{g(!1)}},_=async y=>{const j=y.target.files?.[0];j&&await H(j),y.target.value=""},_e=async()=>{if(t){g(!0);try{const{data:y}=await w.storage.from("avatars").list(t);if(y&&y.length>0){const V=y.map(z=>`${t}/${z.name}`);await w.storage.from("avatars").remove(V)}const{error:j}=await w.from("users").update({avatar_url:null,updated_at:new Date().toISOString()}).eq("id",t);if(j)throw j;ot(),C(Date.now()),n(""),h.success("Profile picture removed")}catch(y){console.error("Error removing avatar:",y),h.error(y.message||"Failed to remove profile picture")}finally{g(!1)}}},ie=()=>"U",O=a?L(a):null,m=`${O||""}_${I}_${E}`;return d?e.jsx("div",{className:"relative",children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:_,disabled:c}),e.jsxs(ye,{className:`${J[o]} border-2 border-transparent hover:border-blue-500 transition-all duration-200`,children:[O&&!c?e.jsx(Be,{src:O,alt:"Profile",className:"object-cover",onError:y=>{const j=y.target;a&&j.src!==a&&(j.src=L(a))}},m):null,e.jsx(be,{className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:c?e.jsx(oe,{className:`${A[o]} animate-spin`}):f?e.jsx(lt,{className:`${A[o]} text-green-400`}):ie()})]})]})}):e.jsxs("div",{className:"relative group",children:[e.jsxs(ye,{className:`${J[o]} border-2 border-white dark:border-gray-800 shadow-md transition-all duration-200 ${p&&i?"scale-105":""}`,onMouseEnter:()=>i&&b(!0),onMouseLeave:()=>b(!1),children:[O&&!c?e.jsx(Be,{src:O,alt:"Profile",className:"object-cover",onError:y=>{const j=y.target;a&&j.src!==a&&(j.src=L(a))}},m):null,e.jsx(be,{className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:c?e.jsx(oe,{className:`${A[o]} animate-spin`}):f?e.jsx(lt,{className:`${A[o]} text-green-400`}):ie()})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:`absolute inset-0 flex items-center justify-center bg-black/40 rounded-full cursor-pointer transition-all duration-200 ${p?"opacity-100":"opacity-0"} ${c?"pointer-events-none":""}`,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:_,disabled:c}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx(da,{className:`${A[o]} text-white`}),o!=="xs"&&o!=="sm"&&e.jsx("span",{className:"text-white text-xs font-medium",children:c?"Uploading...":"Change"})]})]}),a&&s&&!c&&e.jsx(v,{type:"button",size:"icon",variant:"destructive",className:`absolute -top-1 -right-1 h-6 w-6 rounded-full shadow-md transition-all duration-200 ${p?"opacity-100 scale-100":"opacity-0 scale-90"}`,onClick:_e,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),disabled:c,children:e.jsx(ht,{className:"h-3 w-3"})})]}),c&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 rounded-full"}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:`${J[o].replace("h-","h-").replace("w-","w-")} border-4 border-white/30 border-t-white rounded-full animate-spin`})})]})]})}const cs=Xt(function(){const a=dt(),{userId:n}=ea(),[o,i]=l.useState(null),[s,d]=l.useState(null),[c,g]=l.useState(null),[p,b]=l.useState(!0),[f,k]=l.useState([]),[I,C]=l.useState("posts"),[L,E]=l.useState(!1),[J,A]=l.useState(!1),[Ce,H]=l.useState(!1),[_,_e]=l.useState(!1),[ie,O]=l.useState(!1),[m,y]=l.useState({first_name:"",last_name:"",bio:"",location:"",workplace:"",education:"",birthday:"",website:"",privacy:"public",department:"",position:"",phone:"",hire_date:""}),{posts:j,loading:V,createPost:z,deletePost:le,likePost:Z,unlikePost:ce,bookmarkPost:Pe,unbookmarkPost:Q,addComment:X}=ua(s?.id),[M,T]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[G,ee]=l.useState(!1),[Se,Vt]=l.useState(!1),[De,zt]=l.useState(!1),[Xe,et]=l.useState(!1);l.useEffect(()=>{te(),Wt(),Bt()},[]),l.useEffect(()=>{s&&console.log("üîç Viewed user data:",{full_name:s.full_name,logged_in:s.logged_in}),o&&console.log("üîç Logged in user data:",{full_name:o.full_name,logged_in:o.logged_in})},[s,o]),l.useEffect(()=>{const{data:{subscription:r}}=w.auth.onAuthStateChange(async(u,x)=>{if(console.log("Auth state changed:",u,x),u==="SIGNED_IN"&&x?.user)try{await Ee(!0)}catch(N){console.error("Error setting online status:",N)}});return()=>{r.unsubscribe()}},[a]),l.useEffect(()=>{if(!c||!_)return;const r=["mousedown","keydown","scroll","touchstart"];let u;const x=async()=>{await tt(),clearTimeout(u),u=setTimeout(async()=>{_&&(await at(),console.log("User marked as offline due to inactivity"))},300*1e3)};return r.forEach(N=>{window.addEventListener(N,x)}),x(),()=>{r.forEach(N=>{window.removeEventListener(N,x)}),clearTimeout(u),_&&at()}},[c,_]),l.useEffect(()=>{document.title="DeskStaff"},[]),l.useEffect(()=>{const r=n||c;if(!r)return;const u=w.channel(`user-${r}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"users",filter:`id=eq.${r}`},x=>{console.log("User updated:",x.new);const N=x.new;n&&n!==c?d(N):(d(N),i(N))}).subscribe();return()=>{w.removeChannel(u)}},[n,c]);const Ee=async r=>{try{const{data:{user:u},error:x}=await w.auth.getUser();if(x||!u){console.log("No authenticated user found or auth error:",x);return}console.log(`Updating user ${u.id} logged_in to: ${r}`);const N=new AbortController,B=setTimeout(()=>N.abort(),5e3),{error:U}=await w.from("users").update({logged_in:r,updated_at:new Date().toISOString(),...r?{}:{last_seen:new Date().toISOString()}}).eq("id",u.id);clearTimeout(B),U?U.message.includes("aborted")||U.message.includes("AbortError")?console.log("Update aborted (expected during logout)"):console.error("Error updating login status:",U):console.log(`User ${r?"logged in":"logged out"} status updated successfully`)}catch(u){if(u.name==="AbortError"||u.message?.includes("aborted")){console.log("Request was aborted (expected during navigation)");return}console.error("Error in updateUserLoginStatus:",u)}},tt=()=>Ee(!0),at=()=>Ee(!1),te=async()=>{try{console.log("üîÑ Starting fetchUserData...");const{data:{session:r},error:u}=await w.auth.getSession();if(u||!r){console.error("‚ùå Session error:",u),h.error("Please log in to continue"),a("/",{replace:!0});return}g(r.user.id);const x=n||r.user.id,N=x===r.user.id;_e(N);const{data:B,error:U}=await w.from("users").select("*").eq("id",r.user.id).single();U?console.error("‚ùå Error fetching logged-in user:",U):i(B);const{data:S,error:Me}=await w.from("users").select("*").eq("id",x).single();if(Me){if(Me.code==="PGRST116"||Me.message.includes("No rows found"))if(console.log("‚ö†Ô∏è Viewed user not found in database..."),N){await rt(r.user),await te();return}else{h.error("User profile not found"),a(`/profile/${r.user.id}`,{replace:!0});return}h.error("Failed to load profile data");return}if(!S){if(N){await rt(r.user),await te();return}h.error("User profile not found");return}if(d(S),N){y({first_name:S.first_name||"",last_name:S.last_name||"",bio:S.bio||"",location:S.location||"",workplace:S.workplace||"",education:S.education||"",birthday:S.birthday||"",website:S.website||"",privacy:S.privacy||"public",department:S.department||"",position:S.position||"",phone:S.phone||"",hire_date:S.hire_date||""});try{await tt()}catch(Qt){console.error("‚ö†Ô∏è Failed to set user online:",Qt)}}}catch(r){console.error("üí• Error in fetchUserData:",r),h.error("An unexpected error occurred")}finally{b(!1)}},rt=async r=>{try{const{error:u}=await w.from("users").insert({id:r.id,email:r.email,first_name:r.user_metadata?.first_name||"",last_name:r.user_metadata?.last_name||"",full_name:`${r.user_metadata?.first_name||""} ${r.user_metadata?.last_name||""}`.trim()||r.email?.split("@")[0]||"User",avatar_url:null,bio:null,location:null,workplace:null,education:null,birthday:null,website:null,privacy:"public",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),logged_in:!0});if(u)throw u;console.log("‚úÖ New user record created")}catch(u){throw console.error("Error creating user record:",u),u}},Wt=async()=>{try{const r=n||c,u=[{id:"1",content:_?"Just finished the Q3 project report ahead of schedule! Great teamwork from everyone involved. üéØ":`${s?.full_name||"This user"} shared a professional update`,image_url:_?"https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&auto=format&fit=crop":null,created_at:"2024-01-15T10:30:00Z",likes_count:24,comments_count:8,user:{id:r||"1",full_name:s?.full_name||"User",avatar_url:s?.avatar_url||null},liked:!1,bookmarked:!1}];setPosts(u)}catch(r){console.error("Error fetching posts:",r)}},Bt=async()=>{try{k([{id:"2",full_name:"Jane Smith",avatar_url:null,mutual_friends:8,status:"accepted",department:"Engineering",position:"Senior Developer",logged_in:!0},{id:"3",full_name:"Bob Johnson",avatar_url:null,mutual_friends:12,status:"accepted",department:"Marketing",position:"Marketing Manager",logged_in:!1}])}catch(r){console.error("Error fetching friends:",r)}},qt=async()=>{try{const{data:{user:r}}=await w.auth.getUser();if(!r){h.error("No user found");return}h.loading("Testing login status update...");const{data:u,error:x}=await w.from("users").update({logged_in:!1,updated_at:new Date().toISOString()}).eq("id",r.id).select("id, logged_in, updated_at");x?(h.error(`Update failed: ${x.message}`),console.error("Test error details:",x)):(h.success(`Update successful! Status: ${u?.[0]?.logged_in}`),console.log("Test result:",u))}catch(r){h.error("Test failed"),console.error("Test error:",r)}},Ht=async()=>{A(!1);let r=!1;const u=x=>{if(!r)return x.preventDefault(),x.returnValue="Please wait, logging out...","Please wait, logging out..."};window.addEventListener("beforeunload",u);try{h.loading("Logging out...");const{data:{user:x}}=await w.auth.getUser();x&&await Gt(x.id),r=!0,window.removeEventListener("beforeunload",u),await w.auth.signOut(),i(null),d(null),setPosts([]),k([]),h.dismiss(),h.success("Logged out!"),a("/",{replace:!0})}catch(x){console.error("Logout error:",x),h.dismiss(),h.error("Logout failed"),window.removeEventListener("beforeunload",u),a("/",{replace:!0})}},Gt=async(r,u=3)=>{for(let x=1;x<=u;x++)try{console.log(`Attempt ${x} to update database...`);const{error:N,status:B}=await w.from("users").update({logged_in:!1,last_seen:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",r);if(N)throw N;console.log(`‚úÖ Database updated on attempt ${x}, status: ${B}`);const{data:U}=await w.from("users").select("logged_in").eq("id",r).maybeSingle();if(U&&U.logged_in===!1){console.log("‚úÖ Verification passed: logged_in is FALSE");return}else throw new Error("Verification failed")}catch(N){if(console.error(`Attempt ${x} failed:`,N),x===u)throw new Error(`Failed to update database after ${u} attempts`);await new Promise(B=>setTimeout(B,500*x))}},st=async()=>{try{const{data:{user:r}}=await w.auth.getUser();if(!r)return;const{error:u}=await w.from("users").update({first_name:m.first_name,last_name:m.last_name,full_name:`${m.first_name} ${m.last_name}`,bio:m.bio,location:m.location,workplace:m.workplace,education:m.education,birthday:m.birthday,website:m.website,privacy:m.privacy,department:m.department,position:m.position,phone:m.phone,hire_date:m.hire_date,updated_at:new Date().toISOString()}).eq("id",r.id);if(u)throw u;h.success("Your profile has been successfully updated"),te(),E(!1)}catch(r){console.error("Error updating profile:",r),h.error("Failed to update profile")}},Yt=async()=>{if(M.newPassword!==M.confirmPassword){h.error("New passwords do not match");return}if(M.newPassword.length<6){h.error("Password must be at least 6 characters");return}et(!0);try{const{error:r}=await w.auth.updateUser({password:M.newPassword});if(r)throw r;h.success("Your password has been successfully updated"),T({currentPassword:"",newPassword:"",confirmPassword:""}),H(!1)}catch(r){console.error("Error changing password:",r),h.error(r.message||"Failed to change password")}finally{et(!1)}},Kt=async(r,u)=>{try{await z(r,u)&&h.success("Your post has been published")}catch(x){console.error("Error creating post:",x),h.error("Failed to create post")}},$e=async r=>{const u=j.find(x=>x.id===r);if(u){const x=u.likes?.[0]?.count>0;try{x?(await ce(r),h.info("Post unliked")):(await Z(r),h.success("Post liked!"))}catch(N){h.error(N.message||"Failed to like post")}}},Jt=async r=>{const u=j.find(x=>x.id===r);if(u){const x=u.bookmarks?.[0]?.count>0;try{x?(await Q(r),h.info("Post removed from bookmarks")):(await Pe(r),h.success("Post bookmarked!"))}catch(N){h.error(N.message||"Failed to bookmark post")}}},Zt=async r=>{try{await le(r),h.success("Post deleted successfully")}catch(u){console.error("Error deleting post:",u),h.error(u.message||"Failed to delete post")}};return p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(ae,{className:"h-64 w-full rounded-xl bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(ae,{className:"h-32 w-full rounded-xl bg-gray-200 dark:bg-gray-700"}),[1,2,3].map(r=>e.jsx(ae,{className:"h-64 w-full rounded-xl bg-gray-200 dark:bg-gray-700"},r))]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ae,{className:"h-48 w-full rounded-xl bg-gray-200 dark:bg-gray-700"}),e.jsx(ae,{className:"h-64 w-full rounded-xl bg-gray-200 dark:bg-gray-700"})]})]})]})}):e.jsx(Xa,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[e.jsx(ga,{user:o,currentUserId:c,onNavigate:a,onEditProfile:()=>E(!0),onPrivacySettings:()=>O(!0),onChangePassword:()=>H(!0),onLogout:()=>A(!0)}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs(Y,{className:"mb-6 overflow-hidden border-gray-200/50 dark:border-gray-700/50 shadow-lg bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"relative h-56 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-600",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"}),e.jsx("div",{className:"absolute bottom-4 right-4 flex gap-2",children:_?e.jsxs(v,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",onClick:()=>E(!0),children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}):e.jsxs(v,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",onClick:()=>h.success("Connection request sent!"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Connect"]})})]}),e.jsx("div",{className:"relative px-6 pb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-6 -mt-16",children:[e.jsx(Gr,{userId:s?.id||"",currentAvatarUrl:s?.avatar_url||null,onUploadComplete:r=>{s&&d({...s,avatar_url:r||null}),o&&_&&i({...o,avatar_url:r||null})},size:"lg",editable:_}),e.jsx("div",{className:"flex-1 space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:s?.full_name}),s?.logged_in?e.jsxs(de,{className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-green-500 animate-pulse mr-1.5"}),"Online"]}):s?.last_seen?e.jsxs(de,{variant:"outline",className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-gray-400 mr-1.5"}),"Offline"]}):null,s?.position&&e.jsx(de,{variant:"secondary",className:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",children:s.position})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"h-4 w-4"}),e.jsx("span",{children:s?.department||"Department"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsxs("span",{children:[f.length," Connections"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"h-4 w-4"}),e.jsxs("span",{children:["Joined"," ",s?.created_at?new Date(s.created_at).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Recently"]})]}),!s?.logged_in&&s?.last_seen&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Last seen"," ",new Date(s.last_seen).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",onClick:()=>h.success("Connection request sent!"),children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Connect"]}),e.jsxs(v,{variant:"outline",onClick:()=>h.info("Messaging feature coming soon!"),className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Message"]}),e.jsxs(ma,{children:[e.jsx(ha,{asChild:!0,children:e.jsx(v,{variant:"outline",size:"icon",className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:e.jsx(Ua,{className:"h-4 w-4"})})}),e.jsxs(xa,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(Ie,{onClick:()=>E(!0),className:"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),"Edit Profile"]}),e.jsxs(Ie,{onClick:()=>h.info("Saved items feature coming soon!"),className:"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(Da,{className:"mr-2 h-4 w-4"}),"Saved Items"]}),e.jsx(pa,{className:"bg-gray-200 dark:bg-gray-700"}),e.jsxs(Ie,{className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:()=>h.error("Account deletion is not available yet"),children:[e.jsx(nt,{className:"mr-2 h-4 w-4"}),"Delete Account"]})]})]})]})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(qr,{user:{full_name:s?.full_name||"",avatar_url:s?.avatar_url||null,bio:s?.bio||null,position:s?.position||"",department:s?.department||"",location:s?.location||null,email:s?.email||"",phone:s?.phone||"",hire_date:s?.hire_date||"",logged_in:s?.logged_in,last_seen:s?.last_seen,created_at:s?.created_at},connectionsCount:f.length,isOwnProfile:_,onConnect:()=>h.success("Connection request sent!"),onMessage:()=>h.info("Messaging feature coming soon!"),onEdit:()=>E(!0),showActions:!_}),e.jsxs(Y,{className:"border-gray-200/50 dark:border-gray-700/50 bg-white dark:bg-gray-900",children:[e.jsx(Ve,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ze,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[e.jsx(Te,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Connections"]}),e.jsxs(ta,{className:"text-gray-600 dark:text-gray-400",children:[f.length," professional connections"]})]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>h.info("Connections page coming soon!"),className:"text-gray-600 dark:text-gray-400",children:"See all"})]})}),e.jsx(se,{children:e.jsx("div",{className:"grid grid-cols-3 gap-3",children:f.slice(0,9).map(r=>e.jsxs("div",{className:"group cursor-pointer space-y-2",children:[e.jsx("div",{className:"relative",children:e.jsx(ye,{className:"h-20 w-full rounded-xl border-2 border-transparent group-hover:border-blue-500 transition-all",children:e.jsxs(be,{className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white relative",children:[r.full_name.split(" ").map(u=>u[0]).join(""),r.logged_in&&e.jsx("div",{className:"absolute bottom-0 right-0 h-3 w-3 rounded-full bg-green-500 border-2 border-white dark:border-gray-800"})]})})}),e.jsx("div",{className:"space-y-1",children:e.jsxs("p",{className:"text-xs font-semibold truncate text-gray-900 dark:text-white",children:[r.full_name,r.logged_in&&e.jsx("span",{className:"ml-1 text-green-500",children:"‚óè"})]})})]},r.id))})})]}),e.jsxs(Y,{className:"border-gray-200/50 dark:border-gray-700/50 bg-white dark:bg-gray-900",children:[e.jsx(Ve,{className:"pb-3",children:e.jsxs(ze,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[e.jsx(Pa,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Skills & Privacy"]})}),e.jsxs(se,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Profile Privacy"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s?.privacy==="public"&&"Public - Anyone can see your profile",s?.privacy==="friends"&&"Connections only",s?.privacy==="private"&&"Private - Only you can see"]})]}),e.jsx(de,{variant:s?.privacy==="public"?"default":s?.privacy==="friends"?"secondary":"destructive",className:"bg-gradient-to-r from-blue-500 to-indigo-600",children:s?.privacy?.charAt(0).toUpperCase()+s?.privacy?.slice(1)})]}),e.jsxs(v,{variant:"outline",className:"w-full border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",onClick:()=>O(!0),children:[e.jsx(Za,{className:"h-4 w-4 mr-2"}),"Privacy Settings"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[_&&e.jsx(fa,{user:s,onSubmit:Kt,placeholder:"What's on your mind",disabled:!s}),e.jsxs(xr,{value:I,onValueChange:C,children:[e.jsxs(pr,{className:"grid w-full grid-cols-3 bg-gray-100/50 dark:bg-gray-800/50 p-1 rounded-xl",children:[e.jsxs(Ae,{value:"posts",className:"rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm text-gray-700 dark:text-gray-300",children:[e.jsx(za,{className:"h-4 w-4 mr-2"}),"Posts"]}),e.jsxs(Ae,{value:"photos",className:"rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm text-gray-700 dark:text-gray-300",children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Photos"]}),e.jsxs(Ae,{value:"videos",className:"rounded-lg data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm text-gray-700 dark:text-gray-300",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Videos"]})]}),e.jsx(Ue,{value:"posts",className:"space-y-6 mt-6",children:V&&j.length===0?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(oe,{className:"h-8 w-8 animate-spin text-blue-500"})}):j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"h-16 w-16 mx-auto rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No posts yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:_?"Share your first post to start the conversation":"This user hasn't posted anything yet"})]}):j.map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ye,{className:"h-10 w-10",children:[e.jsx(Be,{src:r.user.avatar_url||void 0}),e.jsxs(be,{className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:[r.user.first_name?.[0],r.user.last_name?.[0]]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.user.full_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(r.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),_&&e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>Zt(r.id),className:"text-gray-500 hover:text-red-500",title:"Delete post",children:e.jsx(nt,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:r.content})}),r.image_url&&e.jsx("div",{className:"mb-4 rounded-lg overflow-hidden",children:e.jsx("img",{src:r.image_url,alt:"Post",className:"w-full max-h-[500px] object-cover cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>window.open(r.image_url,"_blank"),loading:"lazy"})}),e.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:()=>$e(r.id),className:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[e.jsx(Re,{className:`h-4 w-4 ${r.likes?.[0]?.count>0?"fill-red-500 text-red-500":""}`}),r.likes?.[0]?.count||0," likes"]}),e.jsxs("button",{onClick:()=>{const u=prompt("Enter your comment:");u&&u.trim()&&X(r.id,u)},className:"flex items-center gap-1 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[e.jsx(it,{className:"h-4 w-4"}),r.comments?.[0]?.count||0," comments"]})]})}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs(v,{variant:"ghost",size:"sm",className:"flex-1 gap-2",onClick:()=>$e(r.id),children:[e.jsx(Re,{className:`h-5 w-5 ${r.likes?.[0]?.count>0?"fill-red-500 text-red-500":""}`}),r.likes?.[0]?.count>0?"Liked":"Like"]}),e.jsxs(v,{variant:"ghost",size:"sm",className:"flex-1 gap-2",onClick:()=>{const u=prompt("Enter your comment:");u&&u.trim()&&X(r.id,u)},children:[e.jsx(it,{className:"h-5 w-5"}),"Comment"]}),e.jsxs(v,{variant:"ghost",size:"sm",className:"flex-1 gap-2",onClick:()=>Jt(r.id),children:[e.jsx("svg",{className:`h-5 w-5 ${r.bookmarks?.[0]?.count>0?"fill-yellow-500 text-yellow-500":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),r.bookmarks?.[0]?.count>0?"Saved":"Save"]})]})]},r.id))}),e.jsx(Ue,{value:"photos",children:e.jsx(Y,{className:"border-gray-200/50 dark:border-gray-700/50 bg-white dark:bg-gray-900",children:e.jsx(se,{className:"pt-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:j.filter(r=>r.image_url).map(r=>e.jsxs("div",{className:"relative group rounded-xl overflow-hidden",children:[e.jsx("img",{src:r.image_url,alt:"Post",className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300",onClick:()=>h.info("Viewing photo in full screen")}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-between p-3",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:r.user.full_name}),e.jsx("p",{className:"text-xs opacity-90",children:new Date(r.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{size:"sm",variant:"secondary",className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white",onClick:()=>$e(r.id),children:e.jsx(Re,{className:`h-3 w-3 ${r.liked?"fill-current":""}`})}),e.jsx(v,{size:"sm",variant:"secondary",className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white",onClick:()=>h.info("Comment on photo"),children:e.jsx(He,{className:"h-3 w-3"})})]})]})]},r.id))})})})}),e.jsx(Ue,{value:"videos",children:e.jsx(Y,{className:"border-gray-200/50 dark:border-gray-700/50 bg-white dark:bg-gray-900",children:e.jsx(se,{className:"pt-6 text-center",children:e.jsxs("div",{className:"py-12 space-y-4",children:[e.jsx("div",{className:"h-16 w-16 mx-auto rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:e.jsx(Oe,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"No videos yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-sm mx-auto",children:"Share your first video to showcase your work or team activities"}),e.jsx("div",{className:"pt-4",children:e.jsxs(v,{variant:"outline",onClick:()=>h.info("Video upload feature coming soon!"),className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Upload Your First Video"]})})]})})})})]})]})]})]}),e.jsx(ue,{open:L,onOpenChange:E,children:e.jsxs(ge,{className:"max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:[e.jsxs(me,{children:[e.jsx(xe,{className:"text-xl text-gray-900 dark:text-white",children:"Edit Profile"}),e.jsx(pe,{className:"text-gray-600 dark:text-gray-400",children:"Update your professional profile information."})]}),e.jsxs("div",{className:"space-y-6 py-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"first_name",className:"text-gray-900 dark:text-white",children:"First Name"}),e.jsx($,{id:"first_name",value:m.first_name,onChange:r=>y({...m,first_name:r.target.value}),className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"last_name",className:"text-gray-900 dark:text-white",children:"Last Name"}),e.jsx($,{id:"last_name",value:m.last_name,onChange:r=>y({...m,last_name:r.target.value}),className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"bio",className:"text-gray-900 dark:text-white",children:"Professional Summary"}),e.jsx(ba,{id:"bio",value:m.bio,onChange:r=>y({...m,bio:r.target.value}),placeholder:"Tell people about your professional background and expertise...",className:"min-h-[100px] border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"department",className:"text-gray-900 dark:text-white",children:"Department"}),e.jsx($,{id:"department",value:m.department,onChange:r=>y({...m,department:r.target.value}),placeholder:"Engineering, Marketing, HR, etc.",className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"position",className:"text-gray-900 dark:text-white",children:"Position"}),e.jsx($,{id:"position",value:m.position,onChange:r=>y({...m,position:r.target.value}),placeholder:"Your job title",className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"location",className:"text-gray-900 dark:text-white",children:"Location"}),e.jsx($,{id:"location",value:m.location,onChange:r=>y({...m,location:r.target.value}),placeholder:"City, Country",className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"phone",className:"text-gray-900 dark:text-white",children:"Phone"}),e.jsx($,{id:"phone",value:m.phone,onChange:r=>y({...m,phone:r.target.value}),placeholder:"+1 (555) 123-4567",className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"workplace",className:"text-gray-900 dark:text-white",children:"Company"}),e.jsx($,{id:"workplace",value:m.workplace,onChange:r=>y({...m,workplace:r.target.value}),placeholder:"Your company name",className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"hire_date",className:"text-gray-900 dark:text-white",children:"Hire Date"}),e.jsx($,{id:"hire_date",type:"date",value:m.hire_date,onChange:r=>y({...m,hire_date:r.target.value}),className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"education",className:"text-gray-900 dark:text-white",children:"Education"}),e.jsx($,{id:"education",value:m.education,onChange:r=>y({...m,education:r.target.value}),placeholder:"Your educational background",className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"birthday",className:"text-gray-900 dark:text-white",children:"Birthday"}),e.jsx($,{id:"birthday",type:"date",value:m.birthday,onChange:r=>y({...m,birthday:r.target.value}),className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"website",className:"text-gray-900 dark:text-white",children:"Website"}),e.jsx($,{id:"website",value:m.website,onChange:r=>y({...m,website:r.target.value}),placeholder:"https://yourportfolio.com",className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"privacy",className:"text-gray-900 dark:text-white",children:"Profile Privacy"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(v,{type:"button",variant:m.privacy==="public"?"default":"outline",onClick:()=>y({...m,privacy:"public"}),className:"justify-start gap-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:[e.jsx(Ba,{className:"h-4 w-4"}),"Public"]}),e.jsxs(v,{type:"button",variant:m.privacy==="friends"?"default":"outline",onClick:()=>y({...m,privacy:"friends"}),className:"justify-start gap-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:[e.jsx(Te,{className:"h-4 w-4"}),"Connections Only"]}),e.jsxs(v,{type:"button",variant:m.privacy==="private"?"default":"outline",onClick:()=>y({...m,privacy:"private"}),className:"justify-start gap-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:[e.jsx(Ca,{className:"h-4 w-4"}),"Private"]})]})]})]}),e.jsxs(he,{children:[e.jsx(v,{variant:"outline",onClick:()=>E(!1),className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:"Cancel"}),e.jsx(v,{onClick:st,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:"Save Changes"})]})]})}),e.jsx(ue,{open:J,onOpenChange:A,children:e.jsxs(ge,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:[e.jsxs(me,{children:[e.jsx(xe,{className:"text-gray-900 dark:text-white",children:"Log Out"}),e.jsx(pe,{className:"text-gray-600 dark:text-gray-400",children:"Are you sure you want to log out? You will need to sign in again to access your account."})]}),e.jsxs(he,{children:[e.jsx(v,{variant:"outline",onClick:()=>A(!1),className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:"Cancel"}),e.jsxs(v,{variant:"destructive",onClick:Ht,children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Log Out"]})]})]})}),e.jsx(ue,{open:Ce,onOpenChange:H,children:e.jsxs(ge,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:[e.jsxs(me,{children:[e.jsx(xe,{className:"text-gray-900 dark:text-white",children:"Change Password"}),e.jsx(pe,{className:"text-gray-600 dark:text-gray-400",children:"Enter your current password and a new password to update your account security."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"currentPassword",className:"text-gray-900 dark:text-white",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"currentPassword",type:G?"text":"password",value:M.currentPassword,onChange:r=>T({...M,currentPassword:r.target.value}),className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),e.jsx(v,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 dark:text-gray-400",onClick:()=>ee(!G),children:G?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"newPassword",className:"text-gray-900 dark:text-white",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"newPassword",type:Se?"text":"password",value:M.newPassword,onChange:r=>T({...M,newPassword:r.target.value}),className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),e.jsx(v,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 dark:text-gray-400",onClick:()=>Vt(!Se),children:Se?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"confirmPassword",className:"text-gray-900 dark:text-white",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"confirmPassword",type:De?"text":"password",value:M.confirmPassword,onChange:r=>T({...M,confirmPassword:r.target.value}),className:"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),e.jsx(v,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-600 dark:text-gray-400",onClick:()=>zt(!De),children:De?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})})]})]})]}),e.jsxs(he,{children:[e.jsx(v,{variant:"outline",onClick:()=>H(!1),className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:"Cancel"}),e.jsxs(v,{onClick:Yt,disabled:Xe,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:[Xe?e.jsx(oe,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Change Password"]})]})]})}),e.jsx(ue,{open:ie,onOpenChange:O,children:e.jsxs(ge,{className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:[e.jsxs(me,{children:[e.jsx(xe,{className:"text-gray-900 dark:text-white",children:"Privacy Settings"}),e.jsx(pe,{className:"text-gray-600 dark:text-gray-400",children:"Control who can see your profile and activity on DeskStaff."})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Profile Visibility"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Who can see your profile?"})]}),e.jsxs("select",{className:"border rounded-lg px-3 py-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:m.privacy,onChange:r=>y({...m,privacy:r.target.value}),children:[e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"friends",children:"Connections Only"}),e.jsx("option",{value:"private",children:"Private"})]})]}),e.jsx(qe,{className:"bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Email Visibility"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Who can see your email?"})]}),e.jsxs("select",{className:"border rounded-lg px-3 py-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{children:"Only Me"}),e.jsx("option",{children:"Connections"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Connections List"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Who can see your connections?"})]}),e.jsxs("select",{className:"border rounded-lg px-3 py-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{children:"Public"}),e.jsx("option",{children:"Connections Only"}),e.jsx("option",{children:"Only Me"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Post Visibility"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Default audience for new posts"})]}),e.jsxs("select",{className:"border rounded-lg px-3 py-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{children:"Public"}),e.jsx("option",{children:"Connections Only"}),e.jsx("option",{children:"Only Me"})]})]})]})]})}),e.jsxs(he,{children:[e.jsx(v,{variant:"outline",onClick:()=>O(!1),className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:"Cancel"}),e.jsx(v,{onClick:()=>{st(),O(!1),h.success("Privacy settings updated")},className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:"Save Privacy Settings"})]})]})}),e.jsxs("div",{className:"fixed bottom-4 right-4 flex flex-col gap-2",children:[e.jsx(v,{variant:"outline",size:"sm",onClick:qt,className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:"Test Login Status Update"}),e.jsx(v,{onClick:()=>{console.log("Current states:",{loggedInUser:o,viewedUser:s,currentUserId:c,loading:p}),te()},className:"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",size:"sm",children:"Debug Fetch"})]})]})})});export{cs as default};
